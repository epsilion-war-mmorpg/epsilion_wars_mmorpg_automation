import pytest

from epsilion_wars_mmorpg_automation.game.parsers import get_scrolls

scrolls_message = """üìÉ –°–≤–∏—Ç–∫–∏

üîñ –õ–∏—á–Ω—ã–π —Å–≤–∏—Ç–æ–∫ —É–¥–∞—á–∏ - 2—à—Ç
–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –¥—Ä–æ–ø –Ω–∞ +50% 
–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: 1 —á–∞—Å
* –ü—Ä–µ–¥–º–µ—Ç –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–¥–∞—Ç—å
–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: /use_p_luck

üåü –õ–∏—á–Ω—ã–π –ø—Ä–µ–º–∏—É–º 24—á - 1—à—Ç
–î–∞–µ—Ç –ø—Ä–µ–º–∏—É–º —Å—Ç–∞—Ç—É—Å –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –∏ –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è –Ω–∞ 24—á
‚ûï 40% –∫ –æ–ø—ã—Ç—É –∑–∞ —É–±–∏–π—Å—Ç–≤–æ –º–æ–Ω—Å—Ç—Ä–æ–≤
‚ûï 20% –∫ –∑–æ–ª–æ—Ç—É —Å –º–æ–Ω—Å—Ç—Ä–æ–≤
‚ûï 20% –∫ —à–∞–Ω—Å—É –¥—Ä–æ–ø–∞ –≤–µ—â–µ–π —Å –º–æ–Ω—Å—Ç—Ä–∞
‚ûï 2 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–ª–æ—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –±–∏–Ω–¥–æ–≤
* –ü—Ä–µ–¥–º–µ—Ç –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–¥–∞—Ç—å
–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: /use_prem24

üîñ –õ–∏—á–Ω—ã–π —Å–≤–∏—Ç–æ–∫ –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏—è - 1—à—Ç
–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø–æ–ª—É—á–∞–µ–º—ã–π –æ–ø—ã—Ç –Ω–∞ +100% 
–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: 1 —á–∞—Å 
* –ü—Ä–µ–¥–º–µ—Ç –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–¥–∞—Ç—å
–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: /use_p_exp

üîñ –°–≤–∏—Ç–æ–∫ –∑–∞—Ç–æ—á–∫–∏ [II] - 7—à—Ç
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞—Ç–æ—á–∫–∏ –ø—Ä–µ–¥–º–µ—Ç–∞ –≥—Ä–µ–π–¥–∞ [II]

üéü –õ–∏—á–Ω—ã–π c–±—Ä–æ—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ - 1—à—Ç
–î–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–±—Ä–æ—Å–∏—Ç—å üß¨ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–≥—Ä–æ–∫–∞
* –ü—Ä–µ–¥–º–µ—Ç –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–¥–∞—Ç—å"""

scrolls_empty_message = """üìÉ –°–≤–∏—Ç–∫–∏

üîñ –°–≤–∏—Ç–æ–∫ –∑–∞—Ç–æ—á–∫–∏ [II] - 14—à—Ç
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞—Ç–æ—á–∫–∏ –ø—Ä–µ–¥–º–µ—Ç–∞ –≥—Ä–µ–π–¥–∞ [II]

üîñ –°–≤–∏—Ç–æ–∫ –∑–∞—Ç–æ—á–∫–∏ [I] - 9—à—Ç
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞—Ç–æ—á–∫–∏ –ø—Ä–µ–¥–º–µ—Ç–∞ –≥—Ä–µ–π–¥–∞ [I]

üéü –õ–∏—á–Ω—ã–π c–±—Ä–æ—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ - 2—à—Ç
–î–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–±—Ä–æ—Å–∏—Ç—å üß¨ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–≥—Ä–æ–∫–∞
* –ü—Ä–µ–¥–º–µ—Ç –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–¥–∞—Ç—å"""


scrolls_new_way_format = """üìÉ –°–≤–∏—Ç–∫–∏

üåü –õ–∏—á–Ω—ã–π –ø—Ä–µ–º–∏—É–º 24—á - 1—à—Ç /use_prem24
üîñ –°–≤–∏—Ç–æ–∫ —É–¥–∞—á–∏ - 2—à—Ç /use_luck"""


@pytest.mark.parametrize('payload, expected', [
    (scrolls_message, ['/use_p_luck', '/use_prem24', '/use_p_exp']),
    (scrolls_empty_message, []),
    (scrolls_new_way_format, ['/use_prem24', '/use_luck']),
])
def test_get_scrolls(payload: str, expected: int):
    result = get_scrolls(payload)

    assert result == expected
